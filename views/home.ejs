<!DOCTYPE html>
<html lang="en">
<head>
    <script src="src/scripts.js"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Popcorn Preferences</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <style>
        body { font-family: 'Roboto', sans-serif; }
        .tab { background-color: #e5e7eb; color: #374151; }
        .tab:not(.active):hover { background-color: #d1d5db; }
        .active { color: #fff; background-color: #111827; }
        .card { background-color: #f3f4f6; color: #1f2937; }
        .card:hover { background-color: #e5e7eb; }
        .card-title { color: #4b5563; }
        .search-bar { background-color: #fff; border-color: #6b7280; }
        .search-bar::placeholder { color: #9ca3af; }
        .search-button { background-color: #ef4444; }
        .star-rating { color: #f59e0b; }
        .fun-facts, .trivia { background-color: #f3f4f6; color: #1f2937; }
        .fun-facts-title, .trivia-title { color: #374151; }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        @keyframes slideIn {
            from { transform: translateY(100%); }
            to { transform: translateY(0); }
        }
        @keyframes scaleIn {
            from { transform: scale(0); }
            to { transform: scale(1); }
        }
        .animated {
            animation-duration: 1s;
            animation-fill-mode: both;
        }
        .fadeIn { animation-name: fadeIn; }
        .slideIn { animation-name: slideIn; }
        .scaleIn { animation-name: scaleIn; }
        .card:hover {
            transform: scale(1.05);
            transition: transform 0.3s ease-in-out;
        }
        .search-button:hover {
            background-color: #dc2626;
            transform: scale(1.1);
            transition: background-color 0.3s ease-in-out, transform 0.3s ease-in-out;
        }
        .fun-facts:hover, .trivia:hover {
            transform: rotate(5deg);
            transition: transform 0.3s ease-in-out;
        }
        /* Animations */
        .animated-fadeInUp {
            animation-name: fadeInUp;
        }
        .animated-fadeInUp {
            animation-duration: 1s;
            animation-fill-mode: both;
        }
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(100%);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        .animated-bounce {
            animation-name: bounce;
        }
        .animated-bounce {
            animation-duration: 1s;
            animation-fill-mode: both;
        }
        @keyframes bounce {
            0%,
            100% {
                transform: translateY(0);
            }
            50% {
                transform: translateY(-20px);
            }
        }
    </style>
</head>
<body class="bg-gray-100">

    <div class="min-h-screen bg-gray-200 p-10">
        <div class="max-w-6xl mx-auto">
            <div class="flex items-center text-3xl font-bold mb-6 text-gray-800">
                <img src="static/popcorn.png" alt="Popcorn Logo" class="inline-block h-12 mr-2">
                Popcorn Preferences
            </div>

            <div class="bg-white shadow-xl rounded-xl overflow-hidden">
                <!-- Top Bar -->
                <div class="border-b border-gray-300 bg-gray-50 px-6 py-4">
                    <form action="/search" method="GET">
                        <div class="flex justify-between items-center">
                            <div class="flex space-x-4 items-center w-full">
                                <input name="searchbar" type="text" id="search-input" placeholder="Search Movies..." class="search-bar p-3 rounded-full focus:ring-2 focus:ring-blue-500 transition duration-200 w-full">
                                <button id="search-button" class="search-button text-white py-3 px-6 rounded-full font-medium transition duration-200 hover:bg-blue-600" style="background-color: blue;">SEARCH</button>
                            </div>
                        </div>
                    </form>
                </div>

                <script src="src/scripts.js"></script>
            </body>           
                
                <div class="px-6 py-8">
                    <div class="grid grid-cols-12 gap-8">

                        <div class="col-span-7">
                            <form action="/home" method="GET">
                                <div class="grid grid-cols-5 gap-4">
                                    <button type="submit" name="genreId" value="28">
                                        <div class="card p-4 rounded-xl flex flex-col items-center justify-center space-y-2 animated fadeInUp">
                                            <i class="fas fa-film fa-2x text-blue-500 animate-pulse"></i>
                                            <div class="card-title text-sm font-semibold">Action</div>
                                        </div>
                                    </button>
                                    <button type="submit" name="genreId" value="35">
                                        <div class="card p-4 rounded-xl flex flex-col items-center justify-center space-y-2 animated fadeInUp">
                                            <i class="fas fa-film fa-2x text-green-500 animate-pulse"></i>
                                            <div class="card-title text-sm font-semibold">Comedy</div>
                                        </div>
                                    </button>
                                    <button type="submit" name="genreId" value="10749">
                                        <div class="card p-4 rounded-xl flex flex-col items-center justify-center space-y-2 animated fadeInUp">
                                            <i class="fas fa-film fa-2x text-red-500 animate-pulse"></i>
                                            <div class="card-title text-sm font-semibold">Romance</div>
                                        </div>
                                    </button>
                                    <button type="submit" name="genreId" value="16">
                                        <div class="card p-4 rounded-xl flex flex-col items-center justify-center space-y-2 animated fadeInUp">
                                            <i class="fas fa-film fa-2x text-yellow-500 animate-pulse"></i>
                                            <div class="card-title text-sm font-semibold">Adventure</div>
                                        </div>
                                    </button>
                                    <button type="submit" name="genreId" value="53">
                                        <div class="card p-4 rounded-xl flex flex-col items-center justify-center space-y-2 animated fadeInUp">
                                            <i class="fas fa-film fa-2x text-purple-500 animate-pulse"></i>
                                            <div class="card-title text-sm font-semibold">Thriller</div>
                                        </div>
                                    </button>
                                </div>
                            </form>
                            <form action="/search" method="GET">
                                <div class="mt-8 grid grid-cols-3 gap-8">
                                    <% if (recommendations) { %>
                                        <% recommendations.forEach(function(recommendation) { %>
                                        <div class="bg-gray-50 p-4 rounded-xl animated slideIn">
                                            <button type="submit" name="image" value="<%= recommendation.title %>">
                                                <img src="https://image.tmdb.org/t/p/w500<%= recommendation.poster_path %>" alt="<%= recommendation.title %>" class="w-full h-auto rounded-lg mb-4">
                                            </button>                                            
                                            <div name="title" id=class="text-center text-sm"><%= recommendation.title %></div>
                                        </div>
                                        <% }) %>
                                    <% } else { %>
                                        <div>No movies to display.</div>
                                    <% } %>
                                </div>
                            </form>
                        </div>
                        
                        <div class="col-span-5">
                        <div class="card p-6 rounded-xl animated scaleIn">
                            <% if (movies && movies.length > 0) { %>
                                <% movies.slice(0, 40).forEach(function(movie, index) { %>
                                <div class="flex justify-between items-center mb-4">
                                    <img src="https://image.tmdb.org/t/p/w500<%= movie.poster_path %>" alt="<%= movie.title %>" class="w-8 h-12">
                                    <div class="font-medium text-gray-800"><%= index + 1 %>. <%= movie.title %></div>
                                    <div class="star-rating text-lg font-semibold">‚≠ê <%= Math.round(movie.vote_average * 10) / 10 %>/10</div>
                                </div>
                                <% }) %>
                            <% } else { %>
                                <div>No movies to display.</div>
                            <% } %>
                            </div>
                        </div>
                    </div>

                    <div class="grid grid-cols-12 gap-8 mt-8">
                        <div class="col-span-7">
                            <div class="fun-facts p-6 rounded-xl animated fadeInUp">
                                <div class="fun-facts-title text-lg font-semibold mb-4" style="font-family: 'Arial Black', sans-serif; color: #007bff;">FUN FACTS</div>
                                <div class="h-32 bg-white rounded-xl p-4" style="overflow-wrap: break-word; font-family: 'Arial', sans-serif; color: #333;">
                                    James Bond's "Shaken, Not Stirred": The iconic James Bond preference for his martinis to be "shaken, not stirred" might have less to do with taste and more with the character's savvy nature. Scientists suggest that shaking a martini dissolves more antioxidants than stirring, potentially helping Bond avoid hangovers and stay in top spy condition.
                                </div>
                            </div>
                        </div>
                        <div class="col-span-5">
                            <div class="trivia p-6 rounded-xl animated fadeInUp">
                                <div class="trivia-title text-lg font-semibold mb-4" style="font-family: 'Arial Black', sans-serif;">TRIVIA</div>
                                <div class="h-32 bg-white rounded-xl p-4">
                                    <div id="trivia-question" class="text-center">
                                        Which horror movie's terrifying sounds were partly made by a cat?
                                    </div>
                                    <div id="trivia-answer" class="text-center hidden">
                                        The alien noises in "Alien" (1979) included modified recordings of a cat hissing.
                                    </div>
                                    <button id="show-answer-button" class="text-blue-500 hover:underline mt-2">Show Answer</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>          

    <script>
        const showAnswerButton = document.getElementById('show-answer-button');
        const triviaAnswer = document.getElementById('trivia-answer');
        showAnswerButton.addEventListener('click', () => {
            triviaAnswer.classList.toggle('hidden');
        });

        const searchButton = document.getElementById('search-button');
        const searchInput = document.getElementById('search-input');

        searchButton.addEventListener('click', () => {
            const searchTerm = searchInput.value;
            // Perform search functionality here
            console.log('Search term:', searchTerm);
        });

        window.onload = function() {
            const urlParams = new URLSearchParams(window.location.search);
            const error = urlParams.get('error');
            if (error) {
            alert(error);
            }
        };
    </script>

</body>
</html>
        